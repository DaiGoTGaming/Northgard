Northgard 日本語化翻訳作業手順

■編集対象のファイル

import\extra\lang フォルダ配下にある以下の2ファイル
・export_zh.xml
・texts_zh.xml
これらを日本語言語ファイルと呼ぶことにします。

翻訳の元となるファイルは以下の2つです。
・export.xml
・texts.xml
これらを英語言語ファイルと呼ぶことにします。
これらの準備方法は翻訳作業手順の項目でご説明します。



■翻訳作業手順

================================
1.更新前の英語言語ファイルの準備
================================
まずは、更新前の英語言語ファイルを準備します。
GitHubから入手します。まずは以下のページを開きます。
https://github.com/DaiGoTGaming/Northgard/tree/main/localize/import/extra/lang

export_zh.xml をクリックします。
Northgardがアップデートされた後、一度も日本語化パッチがアップデートされていなければ
そのまま右上にあるボタン[Download raw file]でダウンロードしたものが更新前の英語言語ファイルとなります。
もし、1度でも日本語化パッチが更新されていた場合に一つ前の英語言語ファイルを入手したい場合は
右上の[History]ボタンをクリックし、一つ前のバージョンのところを見て、右側から2番目の[View code at this point]の
ボタンをクリックすると、以前の export_zh.xml が表示されますので、同様に右上にある[Download raw file]のボタンから入手できます。
texts.xml についても全く同様の手順で更新前のファイルを入手します。

入手した更新前の英語言語ファイルのファイル名を変更しておきます。
・export.xml → export_old.xml
・texts.xml  → texts_old.xml

================================
2.最新の英語言語ファイルの準備
================================
まずはSteamにてNorthgardを最新の状態に更新します。
そうしたら、Northgardのインストールフォルダに"NGEditor"フォルダがあります。
その中にある"Editor.exe"を起動します。
メニューの[Database]→[Export Localized Texts]をクリックすると"export.xml"が得られます。
これが現在のNorthgardの英語言語ファイルの1つです。

次にもう一つの言語ファイル texts.xml を取得します。
まずは以下のページにアクセスします。
https://github.com/DaiGoTGaming/Northgard/tree/main/localize
ここにある、"unpack.bat"をクリックし、右上にある[Download raw file]のボタンよりダウンロードします。
このファイルを、日本語化パッチのZipファイルを展開して出来る"localize"フォルダの中に入れます。
※"localize.bat"と同じ位置に配置します。
そうしたら、"unpack.bat"をダブルクリックして実行します。
この手順を初めて行う場合「exportフォルダがありません。作成しても良いですか？」と聞かれるので
"y"を入力してエンターキーを押すと、ファイルの展開が始まります。
2回目以降は"a"を入力してエンターキーを押すと、すべてのファイルが上書きで展開されます。

展開が完了したら、exportフォルダの中に英語言語ファイルの1つである"texts.xml"があると思います。
これがもう一つの最新の英語言語ファイルです。

ここまでで必要なファイルはすべて揃いました。一旦まとめます。

・日本語言語ファイル(import\extra\lang フォルダ配下に置いたままの状態で編集しましょう)
export_zh.xml
texts_zh.xml

・更新前の英語言語ファイル
export_old.xml
texts_old.xml

・最新の英語言語ファイル
export.xml
texts.xml

================================
3.変更箇所のチェック
================================
次にやることは更新前の英語言語ファイルと最新の英語言語ファイルの比較です。
Windowsであれば、WinMerge(https://winmerge.org/?lang=ja)というファイル比較ソフトを使用すると良いでしょう。
WinMergeで、更新前の英語言語ファイルと最新の英語言語ファイルを開いて比較します。
これにより、変更箇所、追加箇所、削除箇所がわかります。

================================
4.日本語言語ファイルの編集
================================
これらを確認しながら、日本語言語ファイルを開いて、全く同じ場所を翻訳修正などしていきます。
このとき、タグの順番などは英語言語ファイルと全く同じにしましょう。
入れ替えても動作するとは思いますが、後々翻訳する人の混乱の元になります。

翻訳の途中でも、日本語化パッチに含まれる"localize.bat"を実行するだけで、Northgard本体に日本語化パッチが適用されますので、随時確認しながら翻訳作業を進めましょう。



■翻訳時の注意点

以下のものは翻訳時に翻訳せず、そのままの形で使用します。変更すると、Northgard内部で変換される数値などが反映されなくなります。
○::percent:: のように、前後がコロン2つで囲まれているもの
○[Food] のように、前後がブラケット(大かっこ)で囲まれているもの
これらの前後には、必ず半角スペースを入れるようにしています。ただし、これらが連続する場合にはその間にはスペースは入れません。

また、以下のものもそのままの形で使用します。
○&lt;
○&gt;

他にも細かい点ですが、基本的に「です・ます」調ではなく「である」調で統一します。
※まだまだそうなっていない箇所も多いですが。。。



■翻訳後Northgardが起動しない時は

翻訳後に"localize.bat"でパッチを適用するとNorthgardが起動しなくなることがあります。
この場合は以下の点を確認して下さい。

○タグ(<Mining>のように大小記号で囲まれたもの)は開始と終了の対になっています。
例えば <Mining> で始まったら、</Mining>が必ず存在します。この片方をコピーし忘れたり、逆に多くコピーしてしまったりすると起動しません。
※終了タグは、開始タグの前に"/"(スラッシュ)を追加したものです

○翻訳対象となる文字は、必ず開始タグと終了タグの間に存在します。
例
<Mining>
あいうえお
</Mining>

これが次のようにタグの外側にある場合はNorthgardが起動しないことがあります。(起動したとしてもそれは間違っています)
<Mining>

</Mining>あいうえお

このように、開始～終了タグの間以外に文字が存在してはいけません。

翻訳作業を一気におこなっても良いのですが、そうすると日本語化パッチを適用した時にNorthgardが起動しなかった場合
どこが間違っているのか探すのが大変な場合があります。この点を考慮して、ある程度翻訳したらパッチを適用し
正常にNorthgardが起動するかを確認しながら行うと良いでしょう。

以上が翻訳作業の説明となります。
翻訳にご協力いただける方は、編集した日本語言語ファイルをZipファイルに固めて送付いただければ、最新のパッチに取り込みます。
その際はX(@daigotgaming)のDMにてご連絡下さい。
